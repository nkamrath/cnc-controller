#ifndef _DRIVERS_PL_PWM_H_
#define _DRIVERS_PL_PWM_H_

#include <stdint.h>
#include <stdlib.h>

#define PL_PWM0_BASE_ADDRESS 		0x43c00000
#define PL_PWM0						((pl_pwm_t*)PL_PWM0_BASE_ADDRESS)

#define PL_PWM_CHANNELS_PER_CONTROLLER	8

typedef struct PL_PWM_T
{
	volatile uint32_t control;
	volatile uint32_t reserved;
	volatile uint32_t periods[PL_PWM_CHANNELS_PER_CONTROLLER];
	volatile uint32_t duty_cycles[PL_PWM_CHANNELS_PER_CONTROLLER];
	volatile uint32_t period_counts[PL_PWM_CHANNELS_PER_CONTROLLER];
	volatile uint32_t status_registers[PL_PWM_CHANNELS_PER_CONTROLLER];
} pl_pwm_t;

void PlPwm_Enable(pl_pwm_t* pwm, uint8_t channel);
void PlPwm_Disable(pl_pwm_t* pwm, uint8_t channel);

void PlPwm_SetPeriod(pl_pwm_t* pwm, uint8_t channel, uint32_t period);
void PlPwm_SetDutyCycle(pl_pwm_t* pwm, uint8_t channel, uint32_t duty_cycle);
void PlPwm_SetPeriodCount(pl_pwm_t* pwm, uint8_t channel, uint32_t period_count);
uint32_t PlPwm_GetStatus(pl_pwm_t* pwm, uint8_t channel);

#endif
